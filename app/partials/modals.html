<!--
<div id="sanity" ng-controller="SanityCtrl" ng-model="show"
     ui-modal class="fade" data-backdrop="static" data-keyboard="false">
  <div class="modal-header">
    <h3>{{ 'UNEXPECTED_STATE_TITLE' | i18n }}</h3>
  </div>
  <div class="modal-body">
    <div>{{ 'UNEXPECTED_STATE_PROMPT' | i18n }}</div>
    <form class="form-inline pagination-centered">
      <label class="checkbox">
        <input type="checkbox" ng-model="notifyLanternDevs">
        {{ 'NOTIFY_LANTERN_DEVS' | i18n }}
      </label>
    </form>
  </div>
  <div class="modal-footer">
    <button ng-click="maybeNotify(); reset()" class="btn btn-danger">{{ 'RESET' | i18n }}</button>
    <button ng-click="maybeNotify(); refresh()" class="btn btn-primary">{{ 'REFRESH' | i18n }}</button>
  </div>
</div>
-->

<div id="settings-unlock" ng-controller="SettingsUnlockCtrl" ui-modal
     ng-model="show" class="fade" data-backdrop="static" data-keyboard="false">
  <form name="unlockForm" ng-submit="settingsUnlock()">
    <div class="modal-header">
      <h3>{{ 'SETTINGS_UNLOCK_TITLE' | i18n }}</h3>
    </div>
    <div class="modal-body">
      <div>{{ 'SETTINGS_UNLOCK_PROMPT' | i18n }}</div>
      <br>
      <div class="control-group" ng-class="{error: error}">
        <div class="controls pagination-centered">
          <div class="input-append">
            <input type="password" ng-model="password" autofocus required
                   name="password" placeholder="{{ 'PASSWORD' | i18n }}">
            <button type="submit" ng-disabled="unlockForm.$invalid"
                    class="btn btn-primary">{{ 'UNLOCK' | i18n }}</button>
          </div>
          <div class="text-error" ui-toggle="error && unlockForm.password.$pristine">
            {{ 'PASSWORD_INVALID' | i18n }}
          </div>
        </div>
      </div>
    </div>
  </form>
</div>

<div id="settings-load-failure" ng-controller="SettingsLoadFailureCtrl" ui-modal
     ng-model="show" class="fade" data-backdrop="static" data-keyboard="false">
  <div class="modal-header">
    <h3>{{ 'SETTINGS_LOAD_FAILURE_TITLE' | i18n }}</h3>
  </div>
  <div class="modal-body">
    <div>{{ 'SETTINGS_LOAD_FAILURE_PROMPT' | i18n }}</div>
    <form class="form-inline pagination-centered">
      <label class="checkbox">
        <input type="checkbox" ng-model="notifyLanternDevs">
        {{ 'NOTIFY_LANTERN_DEVS' | i18n }}
      </label>
    </form>
  </div>
  <div class="modal-footer">
    <button ng-click="maybeNotify(); reset()" class="btn btn-danger">{{ 'RESET' | i18n }}</button>
    <button ng-click="maybeNotify(); quit()" class="btn btn-primary">{{ 'QUIT' | i18n }}</button>
  </div>
</div>

<!-- setup screens -->

<div id="password-create" ng-controller="PasswordCreateCtrl" ui-modal
     ng-model="show" class="fade" data-backdrop="static" data-keyboard="false">
  <form name="passwordCreateForm" ng-submit="passwordCreate()">
    <div class="modal-header">
      <h3>{{ 'PASSWORD_CREATE_TITLE' | i18n }}</h3>
    </div>
    <div class="modal-body">
      <div>{{ 'PASSWORD_CREATE_PROMPT' | i18n }}</div>
      <br>
      <div class="control-group pagination-centered" ng-class="{error: passwordCreateForm.password2.$dirty && passwordCreateForm.password2.$invalid}">
        <div class="controls">
          <input type="password" ng-model="password1" autofocus required ng-disabled="disableForm"
                 name="password1" placeholder="{{ 'PASSWORD' | i18n }}">
        </div>
        <div class="controls">
          <input type="password" ng-model="password2" name="password2" ng-disabled="disableForm"
                 required placeholder="{{ 'PASSWORD_CONFIRM' | i18n }}">
          <div class="text-error" ui-toggle="passwordCreateForm.password2.$dirty && passwordCreateForm.password2.$invalid">{{ 'PASSWORDS_MUST_MATCH' | i18n }}</div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="submit" ng-disabled="passwordCreateForm.$invalid || disableForm"
              class="btn btn-primary">{{ 'CREATE' | i18n }}</button>
    </div>
  </form>
</div>

<div id="welcome" ng-controller="WelcomeCtrl" ui-modal ng-model="show"
     class="fade" data-backdrop="static" data-keyboard="false">
  <div class="modal-header pagination-centered">
    <h3>{{ 'WELCOME_TITLE' | i18n }}</h3>
  </div>
  <div class="modal-body pagination-centered">
    <div>{{ 'WELCOME_PROMPT' | i18n }}</div>
  </div>
  <div class="modal-footer">
    <button type="submit" class="btn btn-success" ng-click="changeSetting('mode', MODE.give)">{{ 'GIVE_ACCESS' | i18n }}</button>
    <button type="submit" class="btn btn-primary" ng-click="changeSetting('mode', MODE.get)">{{ 'GET_ACCESS' | i18n }}</button>
  </div>
</div>

<div id="langchooser" ng-controller="LangChooserCtrl" ng-show="show">
  <ul class="pull-right">
    <li ng-class="{active: lang() == 'en'}"><a ng-click="lang() != 'en' && changeSetting('lang', 'en')">English</a></li>
    <li ng-class="{active: lang() == 'zh'}"><a ng-click="lang() != 'zh' && changeSetting('lang', 'zh')">中文</a></li>
    <li ng-class="{active: lang() == 'fa'}"><a ng-click="lang() != 'fa' && changeSetting('lang', 'fa')">‫پارسی‬</a></li>
    <li ng-class="{active: lang() == 'ar'}"><a ng-click="lang() != 'ar' && changeSetting('lang', 'ar')">‫العربية‬</a></li>
  </ul>
</div>

<!-- XXX use both during initial setup and after (when !passwordSaved)? -->
<div id="signin" ng-controller="SigninCtrl" ui-modal ng-model="show" class="fade"
     data-backdrop="static" data-keyboard="false">
  <div class="modal-header">
    <h3>{{ 'SIGNIN_TITLE' | i18n }}</h3>
  </div>
  <div class="modal-body">
    <form name="signinForm" class="form-horizontal" ng-submit="signin()">
      <div>{{ 'SIGNIN_PROMPT' | i18n }}</div>
      <div class="prompt-extra">
        {{ 'NO_GOOG_ACCOUNT' | i18n }}
        <a href="https://mail.google.com/mail/signup" target="_blank">{{ 'CREATE_ONE' | i18n }}</a>
      </div>
      <br>
      <!-- XXX accounts.google.com/SignUp -->
      <div class="control-group">
        <label class="control-label">{{ 'GTALK_USERID' | i18n }}</label>
        <div class="controls">
          <input type="email" autofocus required ng-model="userid" ng-disabled="model.settings.userid || disableForm"
                 name="userid" placeholder="email@example.com">
         <!--    name="userid" placeholder="{{ 'EMAIL_PLACEHOLDER' | i18n }}"> -->
         <!-- XXX input[type=text] placeholder shim broken when used with Angular expression -->
          <a rel="tooltip" data-original-title="{{ 'SIGNIN_TIP_GTALK' | i18n }}" ui-jq="tooltip" tabindex="-1">
            <i class="icon-info-sign"></i>
          </a>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label">{{ 'GTALK_PASSWORD' | i18n }}</label>
        <div class="controls">
          <input type="password" name="password" ng-model="password" ng-disabled="!needPassword || disableForm"
                 ng-required="needPassword" placeholder="{{ needPassword && 'PASSWORD' || 'PASSWORD_SAVED' | i18n }}">
          <a rel="tooltip" data-original-title="{{ 'SIGNIN_TIP_SECURE' | i18n }}" ui-jq="tooltip" tabindex="-1">
            <i class="icon-lock"></i>
          </a>
        </div>
      </div>
      <div class="control-group">
        <div class="controls">
          <label class="checkbox inline clearfix" style="width: 203px"><!-- XXX -->
            <input type="checkbox" ng-model="savePassword" ng-disabled="disableForm"
                   ng-change="changeSetting('savePassword', savePassword)">
            {{ 'SAVE_PASSWORD' | i18n }}
          </label>
          <a rel="tooltip" data-original-title="{{ 'SIGNIN_TIP_SAVE_PASSWORD' | i18n }}" ui-jq="tooltip" tabindex="-1">
            <i class="icon-info-sign"></i>
          </a>
        </div>
      </div>
      <div class="control-group">
        <div class="controls">
          <div ng-class="{'text-error': signinError}" ui-toggle="showSigninStatus">
            {{ signinStatusKey | i18n }}&nbsp;
          </div>
        </div>
      </div>
      <!-- XXX (hidden) submit input so pressing enter triggers form submission (make this a directive?) -->
      <button type="submit" tabindex="-1" style="height: 0; width: 0; border: 0; filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=0); opacity: 0"></button>
    </form>
  </div>
  <div class="modal-footer">
    <!-- buttons outside the form so reset doesn't get triggered when sign in is disabled on pressing enter -->
    <button type="button" ng-click="reset()" ui-if="!model.setupComplete"
            class="btn btn-danger pull-left" tabindex="-1">
      <i class="icon-backward icon-white"></i> {{ 'START_OVER' | i18n }}
    </button>
    <button type="submit" ng-click="signin()" class="btn btn-primary"
            ng-disabled="signinForm.$invalid || disableForm">
      {{ submitButtonLabelKey | i18n }}
    </button>
  </div>
</div>

<div id="gtalk-unreachable" ng-controller="GtalkUnreachableCtrl" ui-modal
     ng-model="show" class="fade" data-backdrop="static" data-keyboard="false">
  <div class="modal-header">
    <h3>{{ 'GTALK_UNREACHABLE_TITLE' | i18n }}</h3>
  </div>
  <div class="modal-body">
    <div>{{ 'GTALK_UNREACHABLE_PROMPT' | i18n }}</div>
  </div>
  <div class="modal-footer">
    <button type="submit" class="btn" ng-click="model.modal = MODAL.signin">{{ 'RETRY_NOW' | i18n }}</button>
    <button type="submit" class="btn" ng-click="continue_()">{{ 'RETRY_LATER' | i18n }}</button>
  </div>
</div>

<div id="not-invited" ng-controller="NotInvitedCtrl" ui-modal
     ng-model="show" class="fade" data-backdrop="static" data-keyboard="false">
  <div class="modal-header">
    <h3>{{ 'NOT_INVITED_TITLE' | i18n }}</h3>
  </div>
  <div class="modal-body">
    <div>{{ 'NOT_INVITED_PROMPT' | i18n }}</div>
  </div>
  <div class="modal-footer">
    <button type="submit" class="btn" ng-click="model.modal = MODAL.signin">{{ 'TRY_ANOTHER_USER' | i18n }}</button>
    <button type="submit" class="btn" ng-click="model.modal = MODAL.requestInvite">{{ 'REQUEST_INVITE' | i18n }}</button>
  </div>
</div>

<div id="request-invite" ng-controller="RequestInviteCtrl" ui-modal
     ng-model="show" class="fade" data-backdrop="static" data-keyboard="false">
  <div class="modal-header">
    <h3>{{ 'REQUEST_INVITE_TITLE' | i18n }}</h3>
  </div>
  <div class="modal-body">
    <div>{{ 'REQUEST_INVITE_PROMPT' | i18n }}</div>
    <form name="sendRequestForm" submit="sendRequest()">
      <label class="radio">
        <input type="radio" ng-disabled="disableForm"
               ng-model="sendToLanternDevs" ng-value="false">
        {{ 'SOMEONE_I_KNOW_LABEL' | i18n }}
      </label>
      <div class="control-extra">
        <input type="email" autofocus ng-required="!sendToLanternDevs"
               ng-disabled="disableForm || sendToLanternDevs"
               ng-model="sendRequestTo" placeholder="email@example.com">
        <div>{{ 'SOMEONE_I_KNOW_INFO' | i18n }}</div>
      </div>
      <br>
      <label class="radio">
        <input type="radio" ng-disabled="disableForm" ng-model="sendToLanternDevs" ng-value="true"> {{ 'LANTERN_DEVS_LABEL' | i18n }}
      </label>
      <div class="control-extra">{{ 'LANTERN_DEVS_INFO' | i18n }}</div>
      <br>
      <div class="text-error" ui-toggle="requestError">
        {{ 'ERROR' | i18n }}&nbsp;
      </div>
      <!-- XXX need (hidden) submit input so pressing enter triggers form submission? -->
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-danger" ng-click="model.modal = MODAL.signin" tabindex="-1">{{ 'CANCEL' | i18n }}</button>
    <button type="submit" class="btn btn-primary" ng-disabled="sendRequestForm.$invalid || disableForm" ng-click="requestInvite()">{{ submitButtonLabelKey | i18n }}</button>
  </div>
</div>

<div id="request-sent" ng-controller="RequestSentCtrl" ui-modal
     ng-model="show" class="fade" data-backdrop="static" data-keyboard="false">
  <div class="modal-header">
    <h3>{{ 'REQUEST_SENT_TITLE' | i18n }}</h3>
  </div>
  <div class="modal-body">
    <div>{{ 'REQUEST_SENT_PROMPT' | i18n }}</div>
  </div>
  <div class="modal-footer">
    <button type="submit" class="btn btn-primary" ng-click="continue_()">{{ 'CONTINUE' | i18n }}</button>
  </div>
</div>

<div id="first-invite-received" ng-controller="FirstInviteReceivedCtrl" ui-modal
     ng-model="show" class="fade" data-backdrop="static" data-keyboard="false">
  <div class="modal-header">
    <h3>{{ 'FIRST_INVITE_RECEIVED_TITLE' | i18n }}</h3>
  </div>
  <div class="modal-body">
    <div>{{ 'FIRST_INVITE_RECEIVED_INTRO' | i18n }}</div>
    <!-- XXX
    <div>{{ 'FIRST_INVITE_RECEIVED_SENDER' | i18n }}</div>
    <div>{{ sender }}&nbsp;</div>
    -->
    <div>{{ 'FIRST_INVITE_RECEIVED_PROMPT' | i18n }}</div>
  </div>
  <div class="modal-footer">
    <button type="submit" class="btn btn-primary" ng-click="continue_()">{{ 'CONTINUE' | i18n }}</button>
  </div>
</div>

<div id="sysproxy" ng-controller="SystemProxyCtrl" ui-modal ng-model="show"
     class="fade" data-backdrop="static" data-keyboard="false">
  <div class="modal-header">
    <h3>{{ 'SYSTEM_PROXY_TITLE' | i18n }}</h3>
  </div>
  <div class="modal-body">
    <div>{{ 'SYSTEM_PROXY_PROMPT' | i18n }}</div>
    <br>
    <div class="control-group">
      <div class="controls">
        <label class="radio control-label">
          <input type="radio" ng-model="systemProxy" ng-value="true"
                 ng-disabled="disableForm">
          {{ 'SYSTEM_PROXY_TRUE' | i18n }}
        </label>
        <div class="control-extra">{{ 'SYSTEM_PROXY_TRUE_INFO' | i18n }}</div>
      </div>
      <div class="controls">
        <label class="radio control-label">
          <input type="radio" ng-model="systemProxy" ng-value="false"
                 ng-disabled="disableForm">
          {{ 'SYSTEM_PROXY_FALSE' | i18n }}
        </label>
        <div class="control-extra">{{ 'SYSTEM_PROXY_FALSE_INFO' | i18n }}</div>
      </div>
    </div>
    <div class="text-error" ui-toggle="sysproxyError">
      {{ 'SYSTEM_PROXY_ERROR' | i18n }}&nbsp;
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" ng-click="reset()" ui-if="!model.setupComplete"
            class="btn btn-danger pull-left">
      <i class="icon-backward icon-white"></i> {{ 'START_OVER' | i18n }}
    </button>
    <button type="submit" class="btn btn-primary" ng-click="sysproxySet()"
            ng-disabled="disableForm">
      {{ submitButtonLabelKey | i18n }}
    </button>
  </div>
</div>

<div id="finished" ng-controller="FinishedCtrl" ui-modal
     ng-model="show" class="fade" data-backdrop="static" data-keyboard="false">
  <div class="modal-header">
    <h3>{{ 'FINISHED_TITLE' | i18n }}</h3>
  </div>
  <div class="modal-body pagination-centered">
    <div>{{ 'FINISHED_PROMPT' | i18n }}</div>
    <br>
    <div>
      <label class="checkbox inline">
        <input type="checkbox" ng-model="notifyLanternDevs"
               ng-change="changeSetting('autoReport', notifyLanternDevs)">
        <small>{{ 'AUTOREPORT_ENABLE' | i18n }}</small>
        <a rel="tooltip" data-original-title="{{ 'AUTOREPORT_PROMPT' | i18n }}" ui-jq="tooltip">
          <i class="icon-info-sign"></i>
        </a>
      </label>
    </div>
  </div>
  <div class="modal-footer">
    <button type="submit" class="btn btn-{{ inGetMode && 'primary' || 'success' }}" ng-click="continue_()">{{ 'FINISH' | i18n }}</button>
  </div>
</div>
